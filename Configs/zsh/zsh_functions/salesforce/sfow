function sfow() {
    # 1. Check dependencies
    if ! command -v fzf &> /dev/null || ! command -v jq &> /dev/null; then
        echo "‚ùå Error: 'fzf' and 'jq' are required."
        return 1
    fi

    echo "‚è≥ Retrieving authorized organizations..."
    local org_list=$(sf org list --json 2>/dev/null)

    if [[ -z "$org_list" ]]; then
        echo "‚ùå No authorized orgs found."
        return 1
    fi

    # 2. Extract Alias/Username for FZF
    local aliases=$(echo "$org_list" | jq -r '.result | [ (.nonScratchOrgs?[] | .alias // .username), (.scratchOrgs?[] | .alias // .username) ] | .[]' | sort)

    if [[ -z "$aliases" ]]; then
        echo "‚ùå Could not extract aliases/usernames from the list."
        return 1
    fi

    # 3. Interactive Selection via FZF
    local selected_alias=$(echo "$aliases" | fzf \
      --prompt="üéØ Select Org to open on web browser: " \
      --height=30% \
      --layout=reverse \
      --border \
      --margin=5% \
      --padding=1
    )


    if [[ -z "$selected_alias" ]]; then
        echo "‚ùå Operation cancelled."
        return
    fi

    echo "üöÄ Opening \033[1;36m$selected_alias\033[0m in your web browser..."

    # 4. Open the Org using 'sf org open'
    # The --target-org flag is optional here if the org is already the default, 
    # but we specify it for safety.
    if sf org open -o "$selected_alias"; then
        echo "‚úÖ Success! The Org should be opening now."
    else
        echo "‚ùå Failed to open the org. Check the connection."
        return 1
    fi
}
